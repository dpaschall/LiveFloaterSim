- name: Fetch and unzip AI sync payload
  run: |
    mkdir -p tmp_sync && cd tmp_sync

    echo ">>> Downloading ZIP"
    curl -L -f -o ai_update.zip "https://ucareffect.org/ai-sync-drop/latest.zip" || { echo "Download failed"; exit 9; }

    echo ">>> Contents of ZIP (pre-unzip)"
    unzip -l ai_update.zip || { echo "Unzip failed (header check)"; exit 9; }

    echo ">>> Unzipping"
    unzip -q ai_update.zip || { echo "Unzip failed"; exit 9; }

    echo ">>> Contents of unpacked directory:"
    ls -l

    echo ">>> Copying files to repo root..."
    cp -rv * ../ || { echo "Copy failed"; exit 9; }

    cd ..
    rm -rf tmp_sync
